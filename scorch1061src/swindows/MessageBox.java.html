<HTML>
<HEAD>
<TITLE>MessageBox.java.html</TITLE>
</HEAD>
<BODY BGcolor=#FFFFFF TEXT=#000000>
<PRE>
<FONT color=#a020f0>package</FONT> Scorch.sWindows;

<FONT color=#0000ff>/*</FONT>
<FONT color=#0000ff>  Class:  MessageBox</FONT>
<FONT color=#0000ff>  Author: Mikhail Kruk</FONT>
<FONT color=#0000ff>  Description: generic tool for providing small dialog boxes with a few</FONT>
<FONT color=#0000ff>  buttons; callbacks can be supplied to the constructor and associated with</FONT>
<FONT color=#0000ff>  buttons. </FONT>
<FONT color=#0000ff>*/</FONT>

<FONT color=#a020f0>import</FONT> java.awt.*;
<FONT color=#a020f0>import</FONT> java.lang.reflect.*;
<FONT color=#a020f0>import</FONT> java.util.*;

<B><FONT color=#2e8b57>public</FONT></B> <B><FONT color=#2e8b57>class</FONT></B> MessageBox <B><FONT color=#2e8b57>extends</FONT></B> sWindow
{
    <B><FONT color=#2e8b57>protected</FONT></B> String[] buttons, callbacks;
    <B><FONT color=#2e8b57>protected</FONT></B> Object[] args;
    <B><FONT color=#2e8b57>protected</FONT></B> Container peer;
    <B><FONT color=#2e8b57>protected</FONT></B> <B><FONT color=#2e8b57>int</FONT></B> textAlign = Label.CENTER;

    <B><FONT color=#2e8b57>public</FONT></B> MessageBox(String title, String message, 
^I^I      String[] buttons, String[] callbacks, 
^I^I      Container owner, Container peer)
    {
^I<B><FONT color=#2e8b57>this</FONT></B>(title, message, buttons, callbacks, owner);
^I<B><FONT color=#2e8b57>this</FONT></B>.peer = peer;

^Ipeer.setEnabled(<FONT color=#ff00ff>false</FONT>);
    }

    <B><FONT color=#2e8b57>public</FONT></B> MessageBox(String title, String message, 
^I^I      String[] buttons, String[] callbacks, 
^I^I      Container owner)
    {
^I<B><FONT color=#2e8b57>this</FONT></B>(title, message, buttons, callbacks, (Object[])<FONT color=#ff00ff>null</FONT>, 
^I     Label.CENTER, owner);
    }

    <B><FONT color=#2e8b57>public</FONT></B> MessageBox(String title, String message, 
^I^I      String[] buttons, String[] callbacks, 
^I^I      <B><FONT color=#2e8b57>int</FONT></B> textAlign,
^I^I      Container owner)
    {
^I<B><FONT color=#2e8b57>this</FONT></B>(title, message, buttons, callbacks, (Object[])<FONT color=#ff00ff>null</FONT>, 
^I     textAlign, owner);
    }

    <B><FONT color=#2e8b57>public</FONT></B> MessageBox(String title, String message, 
^I^I      String[] buttons, String[] callbacks, Object[] args,
^I^I      Container owner)
    {
^I<B><FONT color=#2e8b57>this</FONT></B>(title, message, buttons, callbacks, args, Label.CENTER, owner);
    }
    
    <B><FONT color=#2e8b57>public</FONT></B> MessageBox(String title, String message, 
^I^I      String[] buttons, String[] callbacks, Object[] args,
^I^I      <B><FONT color=#2e8b57>int</FONT></B> textAlign,
^I^I      Container owner)
    {
^I<B><FONT color=#2e8b57>super</FONT></B>(<FONT color=#ff00ff>0</FONT>,<FONT color=#ff00ff>0</FONT>,<FONT color=#ff00ff>0</FONT>,<FONT color=#ff00ff>0</FONT>, title, owner);

^I<B><FONT color=#2e8b57>this</FONT></B>.buttons = buttons;
^I<B><FONT color=#2e8b57>this</FONT></B>.callbacks = callbacks;
^I<B><FONT color=#2e8b57>this</FONT></B>.args = args;
^I<B><FONT color=#2e8b57>this</FONT></B>.textAlign = textAlign;

^IPanel pb = <B><FONT color=#a52a2a>new</FONT></B> Panel();
^Ipb.setLayout(<B><FONT color=#a52a2a>new</FONT></B> FlowLayout(FlowLayout.CENTER));
^I
^I<B><FONT color=#a52a2a>for</FONT></B>(<B><FONT color=#2e8b57>int</FONT></B> i = <FONT color=#ff00ff>0</FONT>; i &lt; buttons.length; i++)
^I    pb.add(<B><FONT color=#a52a2a>new</FONT></B> Button(buttons[i]));

^I<FONT color=#0000ff>/* build the text (multiline) panel */</FONT>
^IPanel pl = <B><FONT color=#a52a2a>new</FONT></B> Panel();
^IStringTokenizer st = <B><FONT color=#a52a2a>new</FONT></B> StringTokenizer(message, <FONT color=#ff00ff>&quot;&quot;</FONT>+<FONT color=#ff00ff>'</FONT><FONT color=#6a5acd>\n</FONT><FONT color=#ff00ff>'</FONT>);
^Ipl.setLayout(<B><FONT color=#a52a2a>new</FONT></B> GridLayout(st.countTokens(),<FONT color=#ff00ff>1</FONT>,<FONT color=#ff00ff>0</FONT>,<FONT color=#ff00ff>0</FONT>));
^I<B><FONT color=#a52a2a>while</FONT></B>( st.hasMoreTokens() )
^I    pl.add(<B><FONT color=#a52a2a>new</FONT></B> Label(st.nextToken(), textAlign));

^IsetLayout(<B><FONT color=#a52a2a>new</FONT></B> BorderLayout());
^Iadd(pl, BorderLayout.CENTER);
^Iadd(pb, BorderLayout.SOUTH);

^Ivalidate();
    }

    <B><FONT color=#2e8b57>public</FONT></B> <B><FONT color=#2e8b57>void</FONT></B> close()
    {
^I<B><FONT color=#a52a2a>if</FONT></B>( peer != <FONT color=#ff00ff>null</FONT> )
^I    peer.setEnabled(<FONT color=#ff00ff>true</FONT>);
^I<B><FONT color=#2e8b57>super</FONT></B>.close();
    }

    <B><FONT color=#2e8b57>public</FONT></B> <B><FONT color=#2e8b57>boolean</FONT></B> handleEvent(Event evt)
    {
^IMethod m = <FONT color=#ff00ff>null</FONT>;

^I<B><FONT color=#a52a2a>if</FONT></B>(evt.id == Event.ACTION_EVENT &amp;&amp; evt.target <B><FONT color=#a52a2a>instanceof</FONT></B> Button)
^I    {
^I^I<B><FONT color=#a52a2a>if</FONT></B>( peer != <FONT color=#ff00ff>null</FONT> )
^I^I    peer.setEnabled(<FONT color=#ff00ff>true</FONT>);

^I^I<B><FONT color=#a52a2a>if</FONT></B>( callbacks == <FONT color=#ff00ff>null</FONT> )
^I^I    {
^I^I^Iclose();
^I^I^I<B><FONT color=#a52a2a>return</FONT></B> <FONT color=#ff00ff>true</FONT>;
^I^I    }
^I^I<B><FONT color=#a52a2a>for</FONT></B>(<B><FONT color=#2e8b57>int</FONT></B> i = <FONT color=#ff00ff>0</FONT>; i &lt; buttons.length; i++)
^I^I    {
^I^I^I<B><FONT color=#a52a2a>if</FONT></B>(buttons[i].equals((String)evt.arg))
^I^I^I    {
^I^I^I^Iclose();
^I^I^I^I<B><FONT color=#a52a2a>if</FONT></B>( callbacks[i] == <FONT color=#ff00ff>null</FONT> ) <B><FONT color=#a52a2a>return</FONT></B> <FONT color=#ff00ff>true</FONT>;
^I^I^I^I<B><FONT color=#a52a2a>try</FONT></B>
^I^I^I^I    {
^I^I^I^I^IClass[] type;
^I^I^I^I^IObject[] arg;
^I^I^I^I^I<B><FONT color=#a52a2a>if</FONT></B>( args == <FONT color=#ff00ff>null</FONT> || args[i] == <FONT color=#ff00ff>null</FONT>)
^I^I^I^I^I    {
^I^I^I^I^I^Itype = <B><FONT color=#a52a2a>new</FONT></B> Class[<FONT color=#ff00ff>0</FONT>];
^I^I^I^I^I^Iarg = <B><FONT color=#a52a2a>new</FONT></B> Object[<FONT color=#ff00ff>0</FONT>];
^I^I^I^I^I    }
^I^I^I^I^I<B><FONT color=#a52a2a>else</FONT></B>
^I^I^I^I^I    {
^I^I^I^I^I^Itype = <B><FONT color=#a52a2a>new</FONT></B> Class[<FONT color=#ff00ff>1</FONT>];
^I^I^I^I^I^Iarg = <B><FONT color=#a52a2a>new</FONT></B> Object[<FONT color=#ff00ff>1</FONT>];
^I^I^I^I^I^Itype[<FONT color=#ff00ff>0</FONT>] = args[i].getClass();
^I^I^I^I^I^Iarg[<FONT color=#ff00ff>0</FONT>] = args[i];
^I^I^I^I^I    }
^I^I^I^I^Im = owner.getClass().getMethod
^I^I^I^I^I    (callbacks[i], type);
^I^I^I^I^Im.invoke(owner, arg);
^I^I^I^I    }
^I^I^I^I<B><FONT color=#a52a2a>catch</FONT></B>(Throwable t)
^I^I^I^I    {
^I^I^I^I^ISystem.err.println(<FONT color=#ff00ff>&quot;MessageBox: &quot;</FONT>+t);
^I^I^I^I^ISystem.err.println(<FONT color=#ff00ff>&quot;method: &quot;</FONT>+callbacks[i]);
^I^I^I^I    }
^I^I^I^I<B><FONT color=#a52a2a>return</FONT></B> <FONT color=#ff00ff>true</FONT>;
^I^I^I    }
^I^I    }
^I    }
^I<B><FONT color=#a52a2a>return</FONT></B> <B><FONT color=#2e8b57>super</FONT></B>.handleEvent(evt);
    }
}
</PRE>
</BODY>
</HTML>
